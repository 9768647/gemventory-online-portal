<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Cache-control" content="public">
    <title>Gemventory</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
    <script src="https://kit.fontawesome.com/50a41ddaf8.js" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/asura.css">
    <!--    <link rel="stylesheet" href="css/login-register.css"/>-->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.16/dist/sweetalert2.all.min.js"></script>
    <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
    <script src="js/bootstrap-validator-v2.js"></script>


</head>
<body class="body">

<!--Login Modal-->
<div class="registerModal center-block">
    <div class="row">
        <div class="borders15 whiteBack marginAuto registerProp col-10 col-sm-8 col-md-6 col-lg-4 col-xl-3">
            <div class="row">
                <div class="col-sm-12 col-lg-12 col-md-12 text-center">
                    <img id="logo" class="img-fluid center-block">
                </div>
            </div>
            <br><br><br><br>
            <div class="center-block" style="margin-top: -10px">
                <form id="formLogin" data-toggle="">
                    <div class="text-center">
                        <br><br>

                        <div id="emailDIv" class="row col-12 text-center" style="margin: auto">
                            <div class="col-sm-2 col-md-2 col-lg-2 col-xl-2">

                            </div>
                            <div class="paddingOff col-sm-8 col-md-8 col-lg-8 col-xl-8">

                                <div class="input-group mb-2 mr-sm-2">
                                    <div class="input-group-prepend">
                                        <span style="width: 44px" class="input-group-text"><i
                                                class="far fa-user"></i></span>
                                    </div>
                                    <input type="text" class="form-control " id="inputLoginUsername"
                                           placeholder="Username" required>
                                </div>
                            </div>
                            <div class="text-justify col-sm-2 col-md-2 col-lg-2 col-xl-2 " hidden>
                                <h6 style="cursor: pointer; font-size:12px" onclick="showPhone()">&nbsp;use phone</h6>
                            </div>
                        </div>

                        <div id="phoneDIv" class="row col-12 text-center" style="margin: auto; ">
                            <div class="col-sm-2 col-md-2 col-lg-2 col-xl-2">

                            </div>
                            <div class="paddingOff col-sm-8 col-md-8 col-lg-8 col-xl-8">
                                <div class="input-group mb-2 mr-sm-2">
                                    <input type="tel" class="form-control " id="phone">
                                </div>
                                <!--<span id="valid-msg" class="hide"></span>
                                <span id="error-msg" class="hide"></span>-->
                            </div>
                            <div class="text-justify col-sm-2 col-md-2 col-lg-2 col-xl-2">
                                <h6 style="cursor: pointer; font-size:12px" onclick="showEmail()">&nbsp;use email</h6>
                            </div>
                        </div>


                        <div class=" col-10 col-sm-10 col-md-8 col-lg-8 col-xl-8"
                             style=" padding-right: 10px; padding-left: 10px; display: inline-block">
                            <div class="input-group mb-2 mr-sm-2">
                                <div class="input-group-prepend">
                                    <span toggle="#password-field" class="input-group-text"><i
                                            class="toggle-password far fa-eye"></i></span>
                                </div>

                                <input type="password" class="form-control " id="inputLoginPassword"
                                       placeholder="Password" required>

                            </div>
                        </div>
                        <!--                        <div class="form-group">-->
                        <!--                            <div class="form-check" >-->
                        <!--                                <input class="form-check-input" type="checkbox" value="" id="invalidCheck2" required>-->
                        <!--                                <label class="form-check-label" for="invalidCheck2">-->
                        <!--                                    Remember me-->
                        <!--                                </label>-->
                        <!--                            </div>-->
                        <!--                        </div>-->

                        <div class="text-center col-10 col-sm-10 col-md-8 col-lg-8 col-xl-4"
                             style="margin: auto; padding: 0px">
                            <button id="buttonLogin" onclick="login();" type="button"
                                    class="btn btn-group-lg buttonLogin btn-block">Log In
                            </button>
                        </div>

                        <br>

                    </div>
                </form>

                <div id="divLabelForgotPassword" class="text-center">
                    Forgot your password?
                    <a class="labelIndex" href="" data-toggle="modal" data-target="#modalFP">Click here.</a>
                </div>
            </div>
        </div>

    </div>


</div>

<!-- MODAL FOR REGISTER -->
<div class="modal fade login" id="registerModal" tabindex="-1" role="dialog" aria-labelledby="forgotPassword"
     aria-hidden="true">
    <div class="modal-dialog login animated">
        <div class="borders30 modal-content">
            <div class="topBorders15 modal-header">
                <h4 class="modal-title white">Welcome!</h4>
                <button type="button" class="close" style="color: white; margin: -0.6rem -1rem -1rem auto"
                        data-dismiss="modal" aria-hidden="true">&times;
                </button>
            </div>
            <div class="modal-body">
                <div class="box">
                    <div class="registerBox" style="display:none;">
                        <div class="form">
                            <form id="contentForm" name="contentForm" data-toggle="validator">

                                <div class="row col-10 text-center" style="margin: auto">
                                    <div class="col-12" style="margin-top: 10px">
                                        <h6>Please provide following details for your new account</h6>
                                    </div>
                                </div>

                                <div class="row col-12" style="padding-right: 0; margin-top: 10px">
                                    <div class="col-12">
                                        <input id="fistName" class="form-control" type="text" name="firstName"
                                               placeholder="First name" required>
                                    </div>
                                </div>
                                <div class="row col-12" style="padding-right: 0;margin-top: 3px">
                                    <div class="col-12">
                                        <input id="lastName" class="form-control" type="text" name="lastName"
                                               placeholder="Last name" required>
                                    </div>
                                </div>

                                <div class="row col-12" style="padding-right: 0;margin-top: 3px">
                                    <div class="col-12">
                                        <input id="email" class="form-control" type="email" placeholder="Email Address"
                                               required>
                                    </div>
                                </div>
                                <!--</div>-->

                                <div id="phoneRegisterDIv">
                                    <!--<div class="row col-12">
                                        <div class="col-12" style="margin-top: 10px">
                                            <h6>Phone</h6>
                                        </div>
                                    </div>-->

                                    <div class="row col-12">
                                        <div class="col-12">
                                            <div class=" text-center">
                                                <input type="tel" class="form-control " id="registerPhone">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!--<div class="row col-12">
                                    <div class="col-12" style="margin-top: 15px">
                                        <h6>Password</h6>
                                    </div>
                                </div>-->
                                <div class="row col-12" style="padding-right: 0; margin-top: 3px">
                                    <div class="col-12">
                                        <input type="password" style=" display: inline-block" class="form-control"
                                               id="registerPassword" placeholder="Password" required>
                                    </div>
                                </div>

                                <div id="message" style="display: none; text-align: left">
                                    <h6>Password must contain the following:</h6>
                                    <p id="letter" class="invalid">A <b>lowercase</b> letter</p>
                                    <p id="capital" class="invalid">A <b>capital (uppercase)</b> letter</p>
                                    <p id="number" class="invalid">A <b>number</b></p>
                                    <p id="length" class="invalid">Minimum <b>8 characters</b></p>
                                </div>

                                <!--<div class="row col-12">
                                    <div class="col-12" style="margin-top: 15px">
                                        <h6>Confirm password</h6>
                                    </div>
                                </div>-->

                                <div class="row col-12" style="padding-right: 0;margin-top: 3px">
                                    <div class="col-12">
                                        <input id="password_confirmation" class="form-control" type="password"
                                               placeholder="Confirm password" name="password_confirmation">
                                    </div>
                                </div>

                                <div id="message2" style="display: none">
                                    <h6 style="color: red">Password does not match.</h6>
                                </div>
                                <br>

                                <div class="form-group">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value=""
                                               onclick="eneableCreateAccount()" id="termsPolicyCheck">
                                        <label class="form-check-label" for="termsPolicyCheck">
                                            By clicking start, you agree to our <a href="javascript:void(0)"
                                                                                   onclick="getPolicy()"
                                                                                   class="labelIndex"
                                                                                   style="cursor: pointer">Privacy
                                            policy</a>
                                            and our <a href="javascript:void(0)" class="labelIndex"
                                                       style="cursor: pointer" onclick="getTerms()">Terms and
                                            Conditions</a>
                                        </label>
                                    </div>
                                </div>
                                <div class="text-center">
                                    <input class="btn btn-md btn-block greenButton" onclick="createAccountFull()"
                                           type="button" id="createAccBton" value="Sign Up" style="margin-top: 10px"
                                           disabled>
                                </div>

                                <br>
                                <div class="text-center">
                                    <a class="labelIndex" style="cursor: pointer" data-toggle="modal"
                                       href=""
                                       onclick="openValidateModal();">Validate Account</a>
                                    <br>
                                </div>
                                <div id="messages" style="display: none">
                                    <p style="color: red" id="messagesText"></p>
                                </div>

                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div class="text-center" style="margin-top: 0px">
                <span>Already have an account?</span>
                <!--<a href="javascript:hideModal('registerModal');" style="cursor: pointer">Login</a>-->
                <a data-toggle="modal"  style="cursor: pointer"
                   onclick="hideModal('registerModal');">Login</a>
            </div>
            <br>

        </div>
    </div>
</div>

<!-- Modal -->
<!--<div class="modal fade" id="forgotPassword" tabindex="-1" role="dialog" aria-labelledby="forgotPassword" aria-hidden="true">-->
<!--    <div class="modal-dialog modal-dialog-centered" role="document">-->
<!--        <div class="borders15 modal-content" >-->
<!--            <div class="blueBack modal-header topBorders15" >-->
<!--<div class="modal fade" id="forgotPassword" tabindex="-1" role="dialog"-->
<!--     aria-labelledby="exampleModalCenterTitle"-->
<!--     aria-hidden="true" data-keyboard="false" data-backdrop="static">-->
<!--    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">-->
<!--        <div class="modal-content">-->
<!--            <div class="modal-header">-->
<!--                <h5 class="modal-title font-weight-bold">Recover password</h5>-->
<!--                <button type="button" class="close" data-dismiss="modal" aria-label="Close">-->
<!--                    <span aria-hidden="true">&times;</span>-->
<!--                </button>-->
<!--            </div>-->
<!--            <div class="modal-body">-->
<!--                <div class="col-xs-12" style="margin-top: 10px">-->
<!--                    <form>-->
<!--                        <div class="form-group">-->
<!--                            <h6>Receive a temporary password by providing your email. You will need to set a new password after logging in with the-->
<!--                                temporary password.</h6>-->
<!--                            <input id="usernameReset" class="form-control" type="text" name="usernameReset" placeholder="username" required>-->
<!--                        </div>-->
<!--                    </form>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="modal-footer">-->
<!--                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>-->
<!--                <button type="button" class="btn greenButton" onclick="recoverPassword()">Submit</button>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->


<!--Modal Forgot Password-->
<div class="modal fade" id="modalFP" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalCenterTitle"
     aria-hidden="true" data-keyboard="false" data-backdrop="static">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title font-weight-bold" id="modalTitleSN">Recover password</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body ">
                <div class="form-group row col-12">
                    <div class="col-1 text-right label-padding-top">
                    </div>
                    <div class="col-11 ">
                        <h6>You will receive a temporary password by providing your email. You will need to set a new
                            password after logging in with the
                            temporary password.</h6>
                    </div>
                </div>
                <div class="form-group row col-12">
                    <div class="col-1 text-right label-padding-top">
                    </div>
                    <div class="col-11 ">
                        <input id="usernameReset" class="form-control" type="text" name="usernameReset"
                               placeholder="username" required>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-lg btn-modal-cancel" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-lg btn-modal disabled" id="buttonSendForgotPassword"
                        onclick="recoverPassword()">Send
                </button>
            </div>
        </div>
    </div>
</div>


<!-- Modal -->
<div class="modal fade" id="termsModal" tabindex="-1" role="dialog" aria-labelledby="forgotPassword" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="borders15 modal-content">
            <div class="blueBack modal-header topBorders15">
                <h5 class="modal-title">Terms and Conditions</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="max-height: 640px; overflow-y: auto">
                <div class="col-xs-12" style="margin-top: 10px">
                    <form>
                        <div class="form-group">
                            <h6 id="termsCondText"></h6>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Ok</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="policyModal" tabindex="-1" role="dialog" aria-labelledby="forgotPassword"
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="borders15 modal-content">
            <div class="blueBack modal-header topBorders15">
                <h5 class="modal-title">Privacy Policy</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="max-height: 640px; overflow-y: auto">
                <div class="col-xs-12" style="margin-top: 10px">
                    <form>
                        <div class="form-group">
                            <h6 id="policyText"></h6>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Ok</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="validateAccountModal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="borders15 modal-content">
            <div class="blueBack modal-header topBorders15">
                <h5 class="modal-title">Validate Account </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="col-xs-12" style="margin-top: 10px">
                    <form>
                        <!--<div class="row col-12">
                            <div class="col-12" style="margin-top: 15px">
                                <h6>Email</h6>
                            </div>
                        </div>

                        <div class="row col-12">
                            <div class="col-12" >
                                <input id="emailForValidate" class="form-control" type="email" name="email" placeholder="Email">
                            </div>
                        </div>


                        <div class="text-center col-12" style="margin: auto;">
                            or
                        </div>

                        <div class="row col-12">
                            <div class="col-12" style="margin-top: 0px">
                                <h6>Phone</h6>
                            </div>
                        </div>

                        <div class="row col-12">
                            <div class="col-12" >
                                <input type="tel" class="form-control "id="registerPhoneForValidate">
                            </div>
                        </div>-->
                        <br>
                        <!--<div class="col-12 text-center" >

                            <div class="btn-group btn-group-toggle" data-toggle="buttons">
                                <label class="btn btn-secondary active" onclick="setValidateEmail()">
                                    <input type="radio"  name="options" id="option1V" autocomplete="off" checked> Email
                                </label>
                                <label class="btn btn-secondary" onclick="setValidatePhone()">
                                    <input type="radio"  name="options" id="option3V" autocomplete="off"> Phone
                                </label>
                            </div>

                        </div>-->

                        <!--<div id="emailValidateDIv" class="row col-12" >-->
                        <div class="row col-12">
                            <div class="col-12" style="margin-top: 0px">
                                <h6>Email</h6>
                            </div>
                        </div>

                        <div class="row col-12">
                            <div class="col-12 ">
                                <input id="emailForValidate" class="form-control" type="email" name="email"
                                       placeholder="Email">
                            </div>
                        </div>
                        <!--</div>-->

                        <div id="phoneValidateDIv" class="row col-12">
                            <div class="row col-12">
                                <div class="col-12" style="margin-top: 0px">
                                    <h6>Phone</h6>
                                </div>
                            </div>

                            <div class="row col-12">
                                <div class="col-12">
                                    <input type="tel" class="form-control " id="registerPhoneForValidate">
                                </div>
                            </div>
                        </div>

                        <div class="row col-12">
                            <div class="col-12">
                                <h6>Validate your email/phone with the code received</h6>
                                <input id="validatePin" class="form-control" type="text" placeholder="pin" required>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn greenButton" onclick="validateFullAccount()">Submit</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="changePassword" tabindex="-1" role="dialog" aria-labelledby="changePassword"
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="borders15 modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Reset password </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div id='divPhone' class="col-xs-12" style="margin-top: 10px">
                    <form>
                        <div class="form-group">
                            <h6>A new password is required.</h6>
                            <input id="newPassword" class="form-control" type="password" name="newPassword"
                                   placeholder="New password" required>
                            <br>
                            <input id="confirmNewPassword" class="form-control" type="password" name="confirmNewPassword"
                                   placeholder="Confirm new password" required>
                        </div>
                    </form>
                </div>
            </div>


            <div class="text-center form-group row col-12">
                <div class="col-md-3">
                </div>
                <div class="col-md-9" id="message3" style="text-align: left">
                    <h6 class="gray-font"> New Password must include:</h6>
                    <p id="cpLength" class="invalid" style="margin-bottom:0px"> - Minimum 8
                        characters</p>
                    <p id="cpLetter" class="invalid" style="margin-bottom:0px">- Lower case
                        letters</p>
                    <p id="cpCapital" class="invalid" style="margin-bottom:0px">- Upper case
                        letters</p>
                    <p id="cpNumber" class="invalid" style="margin-bottom:0px">- One Special character
                        or number</p>
                    <br>
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-lg btn-modal-cancel" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-lg btn-modal disabled" onclick="changePassword()" disabled
                        id="buttonSendChangePasswordLogin">Send
                </button>
            </div>
        </div>
    </div>
</div>

<div id="loading" class="loading">
    <div style="margin-top:25%" align="center">
        <img src='img/waiting.gif' style="width: 120px">
    </div>
</div>

</body>

<script>

    function changePassword() {
        var at = getCookie("accessToken" + document.getElementById('inputLoginUsername').value);
        var changePasswordRequest = {};
        changePasswordRequest.currentPassword = document.getElementById('inputLoginPassword').value;
        changePasswordRequest.newPassword = document.getElementById('confirmNewPassword').value;

        $.ajax({
            type: "PUT",
            crossDomain: true,
            url: conf.urlChangePassword + "?api-key=" + conf.apikey,
            data: JSON.stringify(changePasswordRequest),
            headers: {
                "content-type": "application/json",
                "tenantName": conf.tenantName,
                "api-key": conf.apikey,
                "Authorization": "Bearer " + at,
            },
            success: function (result) {
                loginAuth(document.getElementById('inputLoginUsername').value, document.getElementById('confirmNewPassword').value, "login");
            },
            error: function (xhr, status, error) {
                Swal.fire({
                    title: 'Error!',
                    text: JSON.stringify(xhr.responseJSON.contextResponse.additionalStatusMessage),
                    icon: 'error',
                    confirmButtonText: 'Close'
                })

            }
        })


    }

    function recoverPassword() {
        var resetPasswordRequest = {};
        resetPasswordRequest.username = document.getElementById('usernameReset').value;

        $.ajax({
            type: "POST",
            crossDomain: true,
            url: conf.urlResetPassword + "?api-key=" + conf.apikey,
            data: JSON.stringify(resetPasswordRequest),
            headers: {
                "content-type": "application/json",
                "tenantName": conf.tenantName,
                "api-key": conf.apikey
            },
            success: function (result) {
                $('#forgotPassword').modal('hide');
                Swal.fire({
                    title: 'Password sent',
                    text: "A temporary password was sent to your email. Please log in with it to set a new password",
                    icon: 'success',
                    confirmButtonText: 'Continue'
                });
                $("#modalFP").modal("hide");
            },
            error: function (xhr, status, error) {
                Swal.fire({
                    title: 'Error!',
                    text: JSON.stringify(xhr.responseJSON.contextResponse.additionalStatusMessage),
                    icon: 'error',
                    confirmButtonText: 'Close'
                })

            }
        })

    }

    function createAccountFull() {

        /*  private String timeZoneFormatted;
            */
        document.getElementById("messages").style.display = "none";
        var firstName = document.getElementById('fistName');
        var lastName = document.getElementById('lastName');
        var email = document.getElementById('email');
        var registerPh = document.getElementById('registerPhone');

        if (firstName.value === '') {
            $("#messagesText").text("Please fill the first name.");
            document.getElementById("messages").style.display = "block";
            $('#fistName').focus();
            return;
        } else if (lastName.value === '') {
            $("#messagesText").text("Please fill the last name.");
            document.getElementById("messages").style.display = "block";
            $('#lastName').focus();
            return;
        }
        if (registerCredentialType === "EMAIL") {
            if (email.value === '') {
                $("#messagesText").text("Please fill the email");
                document.getElementById("messages").style.display = "block";
                $('#email').focus();
                return;
            } else if (validateEmail(email.value) === false) {
                $("#messagesText").text("Please fill with a valid email.");
                document.getElementById("messages").style.display = "block";
                return;
            }
        } else {
            if (registerPh.value === '') {
                $("#messagesText").text("Please fill the phone number");
                document.getElementById("messages").style.display = "block";
                $('#registerPhone').focus();
                return;
            } else if (!validNumberRegister) {
                $("#messagesText").text("Please fill with a valid phone number.");
                document.getElementById("messages").style.display = "block";
                return;
            }
        }

        if ($("#password_confirmation").val().length < minPasswordLength) {
            $("#messagesText").text("Password is too short. Minimum 8 characters.");
            document.getElementById("messages").style.display = "block";
            return;
        } else if ($("#password_confirmation").val() != $("#registerPassword").val()) {
            $("#messagesText").text("Password and Confirm must be same.");
            document.getElementById("messages").style.display = "block";
            return;
        } else if (document.getElementById("letter").classList.contains("invalid") || document.getElementById("capital").classList.contains("invalid")
            || document.getElementById("number").classList.contains("invalid") || document.getElementById("length").classList.contains("invalid")) {
            $("#messagesText").text("Password does not match the format. Letter + capital + number and 8 characters length.");
            document.getElementById("messages").style.display = "block";
            return;
        } else {
            document.getElementById("messages").style.display = "none";
            var registerJson = {};
            registerJson.firstName = document.getElementById('fistName').value;
            registerJson.lastName = document.getElementById('lastName').value;
            registerJson.password = document.getElementById('registerPassword').value;
            if (registerCredentialType === "EMAIL") {
                registerJson.username = document.getElementById('email').value;
            } else {
                //registerJson.username = replaceAllCharacters(registerNumber, " ", "%20");
                registerJson.username = registerNumber;
            }

            registerJson.preferredLanguage = "en";
            registerJson.timeZoneFormatted = Intl.DateTimeFormat().resolvedOptions().timeZone;
            registerJson.verified = false;
            registerJson.contactType = registerCredentialType;
            registerFull(registerJson);
        }
    }

</script>

<script src="js/jquery-3.3.1.js"></script>
<script>
    $('#phoneDIv').hide();
    $('#phoneRegisterDIv').hide();
    $('#phoneValidateDIv').hide();
</script>
<!--<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>-->
<script src="js/conf.js"></script>
<!--<script src="js/external/bootstrap.js"></script>-->
<script src="js/login.js"></script>
<script src="js/commons.js"></script>
<script src="js/cookies.js"></script>
<script src="js/apiCalls.js"></script>

<script type="text/javascript" language="javascript" src="js/libphonenumber-js.min.js"></script>
<!--<link rel="stylesheet" href="css/intlTelInput.css">-->
<script src="js/intlTelInput.js"></script>

<!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>-->
<!--<script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>-->
<!--<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">-->

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>


<script type="text/javascript">
    var loginNUmber = "";
    var registerNumber = "";
    var validateNumber = "";
    var credentialType = "EMAIL";
    var registerCredentialType = "EMAIL";
    var validateType = "EMAIL";
    var validNumber = false;
    var validNumberRegister = false;
    var validNumberValidate = false;

    function eneableCreateAccount() {
        if ($('#termsPolicyCheck').is(":checked")) {
            $('#createAccBton').prop('disabled', false);
        } else {
            $('#createAccBton').prop('disabled', true);
        }
    }

    function setEmail() {
        registerCredentialType = "EMAIL";
        $('#phoneRegisterDIv').hide();
        $('#emailRegisterDIv').show();
    }

    function setPhone() {
        registerCredentialType = "MOBILE";
        $('#phoneRegisterDIv').show();
        $('#emailRegisterDIv').hide();
        //alert(registerCredentialType)
    }

    function setValidateEmail() {
        validateType = "EMAIL";
        $('#emailValidateDIv').show();
        $('#phoneValidateDIv').hide();
    }

    function setValidatePhone() {
        validateType = "MOBILE";
        $('#phoneValidateDIv').show();
        $('#emailValidateDIv').hide();
    }

    function showEmail() {
        $('#phoneDIv').hide();
        $('#emailDIv').show();
        credentialType = "EMAIL";
    }

    function showPhone() {
        $('#phoneDIv').show();
        $('#emailDIv').hide();
        credentialType = "MOBILE";
    }

    //Only accepts numbers
    $(function () {
        $("#phone").keypress(function (e) {
            var chr = String.fromCharCode(e.which);
            if ("1234567890".indexOf(chr) < 0)
                return false;
        });
    });

    $(function () {
        $("#registerPhone").keypress(function (e) {
            var chr = String.fromCharCode(e.which);
            if ("1234567890".indexOf(chr) < 0)
                return false;
        });
    });
    $(function () {
        $("#registerPhoneForValidate").keypress(function (e) {
            var chr = String.fromCharCode(e.which);
            if ("1234567890".indexOf(chr) < 0)
                return false;
        });
    });


    var input = document.querySelector("#phone");
    var inputRegister = document.querySelector("#registerPhone");
    var inputRegisterValidate = document.querySelector("#registerPhoneForValidate");


    input.addEventListener('blur', function () {
        if (input.value.trim()) {
            if (intlInput.isValidNumber()) {
                //var number = intl.getNumber(intlTelInputUtils.numberFormat.E164);   // normal +19548888888
                //var number = intl.getNumber(intlTelInputUtils.numberFormat.INTERNATIONAL);// +1 954-888-8888
                var number = intlInput.getNumber(intlTelInputUtils.numberFormat.NATIONAL);
                var countryData = intlInput.getSelectedCountryData();
                $('#phone').val('').val(number);
                loginNUmber = "+" + countryData.dialCode + " " + number;
                validNumber = true;

            } else {
                validNumber = false;
            }
        }
    });

    inputRegister.addEventListener('blur', function () {
        if (inputRegister.value.trim()) {
            if (intlInputRegister.isValidNumber()) {
                var number = intlInputRegister.getNumber(intlTelInputUtils.numberFormat.NATIONAL);
                var countryData = intlInputRegister.getSelectedCountryData();
                $('#registerPhone').val('').val(number);
                registerNumber = "+" + countryData.dialCode + " " + number;
                validNumberRegister = true;

            } else {
                validNumberRegister = false;
            }
        }
    });

    inputRegisterValidate.addEventListener('blur', function () {
        if (inputRegisterValidate.value.trim()) {
            if (intlInputRegisterValidate.isValidNumber()) {
                var number = intlInputRegisterValidate.getNumber(intlTelInputUtils.numberFormat.NATIONAL);
                var countryData = intlInputRegisterValidate.getSelectedCountryData();
                $('#registerPhoneForValidate').val('').val(number);
                validateNumber = "+" + countryData.dialCode + " " + number;
                validNumberValidate = true;

            } else {
                validNumberValidate = false;
            }
        }
    });


    var intlInput = window.intlTelInput(input, {
        initialCountry: "US",
        utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.5/js/utils.js"
    });

    var intlInputRegister = window.intlTelInput(inputRegister, {
        initialCountry: "US",
        utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.5/js/utils.js"
    });

    var intlInputRegisterValidate = window.intlTelInput(inputRegisterValidate, {
        initialCountry: "US",
        utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.5/js/utils.js"
    });

    var sva;
</script>
</html>